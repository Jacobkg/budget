<h1><%= current_month %></h1>

<div id='credit-card-balance'>
  Credit Card Balance: <%= Account.balance("Credit Card").format %>
</div>
<div id='checking-balance'>
  Checking Balance: <%= Account.balance("Checking").format %>
</div>
<br>

<table id='line-items'>
  <tr>
    <th>Date</th>
    <th>Description</th>
    <th>Amount</th>
    <th>Category</th>
    <th>Account</th>
  </tr>
  <% LineItem.this_month.each do |line_item| %>
    <tr>
      <td><%= short_date(line_item.date) %></td>
      <td><%= line_item.description %></td>
      <td><%= line_item.amount.format %></td>
      <td><%= line_item.category %></td>
      <td><%= line_item.account %></td>
    </tr>
  <% end %>
</table>
<br>

<%= form_for(LineItem.new) do |f| %>
  <%= f.select :account, options_for_select([["Credit Card", "Credit Card"], ["Checking", "Checking"]]) %>
  <%= label_tag :date_string, "Date" %>
  <%= text_field_tag :date_string, short_date(Date.today), :autofocus => true %>
  <%= f.label :description %>
  <%= f.text_field :description%>
  <%= f.label :amount %>
  <%= f.text_field :amount %>
  <%= f.select :category, options_for_select(Category.list.map {|n| [n,n]}) %>
  <%= hidden_field_tag :account, (params[:account] || "Credit Card") %>
  <%= f.submit "Save" %>
<% end %>
<br>

<h2>Stats</h2>
<table id='category-stats'>
  <tr>
    <th>Category</th>
    <th>Spent</th>
  </tr>
  <% Category.all.each do |category| %>
    <tr>
      <td> <%= category.name %> </td>
      <td> <%= category.this_month_total.format %> </td>
    </tr>
  <% end %>
</table>